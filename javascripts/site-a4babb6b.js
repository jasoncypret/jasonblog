document.addEventListener("DOMContentLoaded",function(){function e(e){return e?e.textContent:null}function t(e){return(e.getAttribute("data-lightbox")||e.src).match(/\.(mp4|m4v|webm)$/i)?"video":"image"}console.log("DOM Content Loaded");const l=document.querySelectorAll(".gallery-item");if(console.log("Found gallery items:",l.length),0!==l.length){const o=document.createElement("div");o.className="lightbox",o.innerHTML='<div class="lightbox-content"><div class="lightbox-media-container"><img class="lightbox-image lazyload" src="" alt=""><video class="lightbox-video" controls autoplay loop playsinline><source src="" type="video/mp4">Your browser does not support the video tag.</video></div><h3 class="lightbox-title"></h3><p class="lightbox-description"></p></div>',document.body.appendChild(o),console.log("Created lightbox element"),Array.prototype.forEach.call(l,function(l){l.addEventListener("click",function(){const l=this.querySelector(".gallery-thumbnail"),i=this.querySelector(".gallery-item-title"),s=this.querySelector(".gallery-item-description"),a=e(i),c=e(s),n=o.querySelector(".lightbox-image"),d=o.querySelector(".lightbox-video"),r=o.querySelector(".lightbox-title"),y=o.querySelector(".lightbox-description"),u=l.getAttribute("data-lightbox"),g=t(l);n.style.display="none",d.style.display="none","video"===g?(d.querySelector("source").src=u||l.src,d.load(),d.style.display="block"):(n.src=u||l.src,n.alt=l.alt,n.classList.add("lazyload"),window.lazySizes&&window.lazySizes.loader.unveil(n),n.style.display="block"),a?(r.textContent=a,r.style.display="block"):r.style.display="none",c?(y.textContent=c,y.style.display="block"):y.style.display="none",o.classList.add("active")})}),o.addEventListener("click",function(e){if(e.target===o){const t=o.querySelector(".lightbox-image"),l=o.querySelector(".lightbox-video");"block"===l.style.display&&l.pause(),t.classList.remove("lazyload","lazyloaded","ls-is-cached"),o.classList.remove("active")}}),document.addEventListener("keydown",function(e){if("Escape"===e.key&&o.classList.contains("active")){const t=o.querySelector(".lightbox-image"),l=o.querySelector(".lightbox-video");"block"===l.style.display&&l.pause(),t.classList.remove("lazyload","lazyloaded","ls-is-cached"),o.classList.remove("active")}})}});